bottom:
  - class_name: fortune
    id_name: fortune
    name: "今日运势"
    icon: fa-solid fa-clover fa-spin
    order: 3
    html: <div id="fortune-result"></div><div id="recommendations"></div><script>async function getUserIP(){try{const response=await fetch('https://api.ipify.org?format=json');const data=await response.json();return data.ip}catch(error){console.error('Error fetching IP:',error);return null}}async function generateUserFeatureNumber(){try{const userAgent=navigator.userAgent||'Unknown User Agent';const userIP=await getUserIP()||'Unknown IP';const featureNumber=hashString(userAgent+userIP);console.log('User Agent:',userAgent);console.log('User IP:',userIP);console.log('User Feature Number:',featureNumber);return featureNumber}catch(error){console.error('Error generating user feature number:',error);return null}}const seed_user=generateUserFeatureNumber();function hashString(str){let hash=0;for(let i=0;i<str.length;i++){const char=str.charCodeAt(i);hash=(hash<<5)-hash+char}return hash}function krandom(seed){return('0.'+Math.sin(seed).toString().substr(6))}function getCurrentDate(){const today=new Date();const year=today.getFullYear();const month=String(today.getMonth()+1).padStart(2,'0');const day=String(today.getDate()).padStart(2,'0');return`${year}-${month}-${day}`}function getStoredRecommendations(){const storedDate=localStorage.getItem('recommendationsDate');const currentDate=getCurrentDate();return storedDate===currentDate?JSON.parse(localStorage.getItem('recommendations')):null}function saveRecommendationsToStorage(recommendations){const currentDate=getCurrentDate();localStorage.setItem('recommendationsDate',currentDate);localStorage.setItem('recommendations',JSON.stringify(recommendations))}function generateRecommendations(){const currentDate=getCurrentDate();const Activities=[['内卷：卷王附体','内卷：远离卷王'],['打赌：翻车','打赌：必胜'],['宅家：自宅警备员','宅家'],['上网冲浪','上网：请先报备'],['考试：蒙必中','考试：身败名裂']];const randomGoodIndex=Math.floor(krandom(hashString(seed_user+currentDate))*Activities.length);const randomBadIndex=Math.floor(krandom(hashString(seed_user+currentDate+'123'))*Activities.length);return{good:Activities[randomGoodIndex][0],bad:Activities[randomBadIndex][1],}}function showRecommendationsResult(){const storedRecommendations=getStoredRecommendations();const recommendationsResult=storedRecommendations!==null?storedRecommendations:generateRecommendations();saveRecommendationsToStorage(recommendationsResult);const recommendationsElement=document.getElementById('recommendations');recommendationsElement.innerHTML=`<p>宜${recommendationsResult.good}</p><p>忌${recommendationsResult.bad}</p>`}function getCurrentFortune(){const storedDate=localStorage.getItem('fortuneDate');const currentDate=getCurrentDate();return storedDate===currentDate?localStorage.getItem('fortune'):null}function saveFortuneToStorage(fortune){const currentDate=getCurrentDate();localStorage.setItem('fortuneDate',currentDate);localStorage.setItem('fortune',fortune)}function generateFortune(){const fortunes=['大吉','吉','小吉','小凶','凶','大凶'];const randomIndex=Math.floor(krandom(seed_user)*fortunes.length);return fortunes[randomIndex]}function showFortuneResult(){const storedFortune=getCurrentFortune();const fortuneResult=storedFortune!==null?storedFortune:generateFortune();saveFortuneToStorage(fortuneResult);const resultElement=document.getElementById('fortune-result');resultElement.textContent=`今日运势：${fortuneResult}`}showFortuneResult();showRecommendationsResult();</script>